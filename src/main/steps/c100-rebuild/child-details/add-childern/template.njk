{% extends "common/template.njk" %}
{% from "govuk/components/inset-text/macro.njk" import govukInsetText %}
{% from "govuk/components/input/macro.njk" import govukInput %}
{% from "govuk/components/fieldset/macro.njk" import govukFieldset %}
{% from "govuk/components/button/macro.njk" import govukButton %}

{% block page_content %}
<h1 class="govuk-heading-xl">{{pageTitle}}</h1>

{{ govukInsetText({
  text: subTitle
}) }}


{% for child in listedChildern %}
<form method="post" action="{{formaction}}?action=removeChild&childId={{child.id}}">
 <input type="hidden" name="_csrf" id="csrfToken" value="{{ csrfToken }}">
         {% call govukFieldset({
  legend: {
    text: "Child "+ loop.index,
    classes: "govuk-fieldset__legend--m",
    isPageHeading: true
  }
}) %}

  {{ govukInput({
    label: {
      text: 'First name(s)'
    },
    id: "address-line-1",
    name: "firstname",
    value: child['firstname'],
    autocomplete: "address-line1",
    classes: "govuk-input govuk-!-width-one-half"
  }) }}

  {{ govukInput({
    label: {
      text: 'Last name(s)'
    },
    id: "address-line-1",
    name: "lastname",
    value: child['lastname'],
    autocomplete: "address-line1",
    classes: "govuk-input govuk-!-width-one-half"
  }) }}
  {{ govukButton({
  text: "Remove child "+ loop.index,
  classes: "govuk-button--warning"
}) }}

{% endcall %}
  
</form>


{% endfor %}

<form method="post" action="{{formaction}}?action=addChild">
     <input type="hidden" name="_csrf" id="csrfToken" value="{{ csrfToken }}">
    {% call govukFieldset({
  legend: {
    text: "Enter your new name",
    classes: "govuk-fieldset__legend--m",
    isPageHeading: true
  }
}) %}

  {{ govukInput({
    label: {
      text: 'First name(s)'
    },
    hint: {
    text: "Include all middle names here"
  },
    id: "address-line-1",
    name: "firstname",
    autocomplete: "address-line1",
    classes: "govuk-input govuk-!-width-one-half"
  }) }}

  {{ govukInput({
    label: {
      text: 'Last name(s)'
    },
    id: "address-line-1",
    name: "lastname",
    autocomplete: "address-line1",
    classes: "govuk-input govuk-!-width-one-half"
  }) }}
  {{ govukButton({
  text: "Add another child",
  classes: "govuk-button--secondary"
}) }}
{% endcall %}
</form/>
{% endblock %}