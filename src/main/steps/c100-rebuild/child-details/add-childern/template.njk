{% extends "common/template.njk" %}
{% from "govuk/components/inset-text/macro.njk" import govukInsetText %}
{% from "govuk/components/input/macro.njk" import govukInput %}
{% from "govuk/components/fieldset/macro.njk" import govukFieldset %}
{% from "govuk/components/button/macro.njk" import govukButton %}

{% block page_content %}
<h1 class="govuk-heading-xl">{{pageTitle}}</h1>

{{ govukInsetText({
  text: subTitle
}) }}

<form method="post" action="{{ formaction }}" type="submit">
<input type="hidden" name="_csrf" id="csrfToken" value="{{ csrfToken }}">
{% for child in listedChildern %}
 
         {% call govukFieldset({
  legend: {
    text: "Child "+ loop.index,
    classes: "govuk-fieldset__legend--m",
    isPageHeading: true
  }
}) %}

  {{ govukInput({
    label: {
      text: 'First name(s)'
    },
    id: "address-line-1",
    name: "firstname-" + loop.index,
    value: child['firstname'],
    autocomplete: "address-line1",
    classes: "govuk-input govuk-!-width-one-half"
  }) }}

  {{ govukInput({
    label: {
      text: 'Last name(s)'
    },
    id: "address-line-1",
    name: "lastname-" + loop.index,
    value: child['lastname'],
    autocomplete: "address-line1",
    classes: "govuk-input govuk-!-width-one-half"
  }) }}

  <input type="hidden" name="_cid-{{loop.index}}" id="cid-{{loop.index}}" value="{{ child.id }}">

  {{ govukButton({
  text: "Remove child "+ loop.index,
  classes: "govuk-button--warning",
   attributes: {
            formaction: "?action=removeChild&childId=" +child.id
        }
}) }}


{% endcall %}

{% endfor %}

    {% call govukFieldset({
  legend: {
    text: "Enter your new name",
    classes: "govuk-fieldset__legend--m",
    isPageHeading: true
  }
}) %}

  {{ govukInput({
    label: {
      text: 'First name(s)'
    },
    hint: {
    text: "Include all middle names here"
  },
    id: "address-line-1",
    name: "firstname-"+(listedChildern.length+1),
    autocomplete: "address-line1",
    classes: "govuk-input govuk-!-width-one-half",
    errorMessage: {
      text: "Enter the first name"
    }
  }) }}

  {{ govukInput({
    label: {
      text: 'Last name(s)'
    },
    id: "address-line-1",
    name: "lastname-"+(listedChildern.length+1) ,
    autocomplete: "address-line1",
    classes: "govuk-input govuk-!-width-one-half",
     errorMessage: {
    text: "Enter the last name"
  }
  }) }}
  {{ govukButton({
  text: "Add another child",
  classes: "govuk-button--secondary",
     attributes: {
            formaction: "?action=addChild"
        }
}) }}
{% endcall %}

 {{ govukButton({
  text: "Continue",
  classes: "govuk-buttons",
   attributes: {
            formaction: "?action=continue"
        }
}) }}
 {{ govukButton({
  text: "Save and come back later",
  classes: "govuk-button--secondary govuk-!-margin-left-2",
  attributes: {
            formaction: "?action=continue"
        }
}) }}
  
</form>

{% endblock %}
