{% from "govuk/components/details/macro.njk" import govukDetails %}
{% from "govuk/components/error-summary/macro.njk" import govukErrorSummary %}
{% from "../../../common/fileupload/macro.njk" import fileUpload %}

{% extends "common/page.njk" %}
{% block page_content %}

{% if FileErrors.length > 0 %}
{{ govukErrorSummary({
  titleText: "There is a problem",
  errorList: FileErrors
}) }}
{%endif%}

<h1 class="govuk-heading-xl">{{title}} </h1>
<p class="govuk-body">{{ uploadGuidance | safe }}</p>

{% for error in sessionErrors %}
    {%- if  error.propertyName === 'document'  %}<div class="govuk-form-group--error">  {% endif %}
    {% endfor %}
    {% for error in sessionErrors %}
      {%- if  error.propertyName === 'document'  %}
        {%- if  error.errorType === 'required'  %}
            <span class="govuk-error-message" id="co-file-upload-required-error">
            <span class="govuk-visually-hidden">Error: </span>{{errors['document'].required}}</span>
        {% endif %}
        {%- if  error.errorType === 'multipleFiles'  %}
            <span class="govuk-error-message" id="co-file-upload-multiple-error">
            <span class="govuk-visually-hidden">Error: </span>{{errors['document'].multipleFiles}}</span>
        {% endif %}
      {% endif %}
{% endfor %}
{{ fileUpload(
    {
        uploadButtonText: uploadButton,
        fileuploadTitle: titleForFile ,
        fileuploadTitleClass: "govuk-!-font-weight-bold",
        formPostURL: postURL ,
        sessionFilesArray: false,
        sessionFiles: userCase.refuge_certificate,
        uploadFileHeading: '',
        sessionNullFilesMessage: noFilesUploaded,
        removeText: remove,
        csrfToken: csrfToken
    }) 
}}
{% for error in sessionErrors %}
  {%- if  error.propertyName === 'document'  %}</div>  {% endif %}
{% endfor %}
{% endblock %}