{% extends "common/template.njk" %}
{% extends "common/breadcrumb/template.njk" %}
{% block page_content %}

  {% if section %}
    <h1 class="govuk-heading-xl govuk-!-margin-top-6">{{ section }}</h1>
  {% endif %}

  <p class="govuk-body">{{ caseNumber }} {{ userCase.id }}</p>
  <hr class="govuk-section-break govuk-section-break--m govuk-section-break--visible">
  {# <h3 class="govuk-heading-l">{{ yourPreviousHearings }}</h3> #}
  {% if nextHearing.length>=1 %}
   <h3 class="govuk-heading-l">{{ yourFutureHearings }}</h3>
   <p class="govuk-body"><a href={{linkforsupport}}>{{supportDuringCaselinktext}} </a></p>
   <p class="govuk-body"><a href={{linkfordelayorcancel}}>{{delayorcancellinktext}} </a></p>
   {% for item in nextHearing %}
    <h1 class="govuk-heading-m">{{ nextHearingHeading }}</h1>
  
    <dl class="govuk-summary-list"> 
      <div class="govuk-summary-list__row">
            <dt class="govuk-summary-list__key">
              {{ dates }}
            </dt>
            <dd class="govuk-summary-list__value">
              {{item.dates}}
            </dd>
      </div>
      <div class="govuk-summary-list__row">
            <dt class="govuk-summary-list__key">
              {{ hearingLength }} 
            </dt>
            <dd class="govuk-summary-list__value">
              {{ item.lengthOfHearingText }}
            </dd>
      </div>
      <div class="govuk-summary-list__row">
            <dt class="govuk-summary-list__key">
              {{ hearingMethod }}
            </dt>
             <dd class="govuk-summary-list__value">
              {{ item.hearingMethod }}
            </dd>
      </div>
    </dl>
    {% set count = 0%}
    {% for schedule in item.hearingDaySchedule %}
    {% set count = count+1 %}
    <dl class="govuk-summary-list govuk-!-margin-left-5">
      <div class="govuk-summary-list__row">
            <dt class="govuk-summary-list__key">
              {{ day }}{{ count}}
            </dt>
      </div>
      <div class="govuk-summary-list__row">
            <dt class="govuk-summary-list__key">
              {{ hearingDate }}
            </dt>
            <dd class="govuk-summary-list__value">
              {{schedule.hearingDate}}
            </dd>
      </div>
        <div class="govuk-summary-list__row">
            <dt class="govuk-summary-list__key">
              {{ startTime }}
            </dt>
              <dd class="govuk-summary-list__value">
              {{schedule.preparedStartTime |safe}}
              </dd>
        </div>
      <div class="govuk-summary-list__row">
            <dt class="govuk-summary-list__key">
              {{ hearingDuration }}
            </dt>
              <dd class="govuk-summary-list__value">
                    {{schedule.hearingDurationText}}
              </dd>
      </div>
      <div class="govuk-summary-list__row">
            <dt class="govuk-summary-list__key">
              {{ judgeName }}
            </dt>
            <dd class="govuk-summary-list__value">
              {{schedule.judgeName}}
            </dd>
      </div>
      {% if schedule.detailsBlock %}
        {% for detail in schedule.detailsBlock %}
          <div class="govuk-summary-list__row">
            <dt class="govuk-summary-list__key">
              {{detail.key}}
            </dt>
            <dd class="govuk-summary-list__value">
              {{detail.value}}
            </dd>
          </div>
        {% endfor %} 
      {% endif %}
    </dl>
    {% endfor %} 
    {% set count = 0%}
   {% endfor %}
   <hr class="govuk-section-break govuk-section-break--m govuk-section-break--visible">
  {% endif %}
  {% if futureHearings.length>=1 %}
   {% for item in futureHearings %}
    <h2 class="govuk-heading-m">{{ upcomingHearing }}</h2>
    <dl class="govuk-summary-list ">
      <div class="govuk-summary-list__row">
            <dt class="govuk-summary-list__key">
              {{ dates }}
            </dt>
            <dd class="govuk-summary-list__value">
              {{item.dates}}
            </dd>
      </div>
      <div class="govuk-summary-list__row">
            <dt class="govuk-summary-list__key">
              {{ hearingLength }} 
            </dt>
            <dd class="govuk-summary-list__value">
             {{ item.lengthOfHearingText }}
            </dd>
      </div>
      <div class="govuk-summary-list__row">
            <dt class="govuk-summary-list__key">
              {{ hearingMethod }}
            </dt>

             <dd class="govuk-summary-list__value">
              {{ item.hearingMethod }}
            </dd>
      </div>
    </dl>
    {% set count = 0%}
    {% for schedule in item.hearingDaySchedule %}
    {% set count = count+1 %}
    {# <hr class="govuk-section-break govuk-section-break--sm govuk-section-break--visible"> #}
    <dl class="govuk-summary-list govuk-!-margin-left-5">
      <div class="govuk-summary-list__row">
            <dt class="govuk-summary-list__key">
              {{ day }}{{count}}
            </dt>
      </div>
      <div class="govuk-summary-list__row">
            <dt class="govuk-summary-list__key">
              {{ hearingDate }}
            </dt>
            <dd class="govuk-summary-list__value">
              {{schedule.hearingDate}}
            </dd>
      </div>
        <div class="govuk-summary-list__row">
            <dt class="govuk-summary-list__key">
              {{ startTime }}
            </dt>
              <dd class="govuk-summary-list__value">
              {{schedule.preparedStartTime | safe}}
              </dd>
        </div>
      <div class="govuk-summary-list__row">
            <dt class="govuk-summary-list__key">
              {{ hearingDuration }}
            </dt>
              <dd class="govuk-summary-list__value">
                {{schedule.hearingDurationText}}
              </dd>
      </div>
      <div class="govuk-summary-list__row">
            <dt class="govuk-summary-list__key">
              {{ judgeName }}
            </dt>
            <dd class="govuk-summary-list__value">
              {{schedule.judgeName}}
            </dd>
      </div>
      {% if schedule.detailsBlock %}
        {% for detail in schedule.detailsBlock %}
          <div class="govuk-summary-list__row">
            <dt class="govuk-summary-list__key">
              {{detail.key}}
            </dt>
            <dd class="govuk-summary-list__value">
              {{detail.value}}
            </dd>
          </div>
        {% endfor %} 
      {% endif %}
    </dl>
    
    {% endfor %}
    {% set count = 0%}
    <hr class="govuk-section-break govuk-section-break--m govuk-section-break--visible">
   {% endfor %}
  {% endif %}
  {% if completedHearings.length>=1 %}
   {# ...<h3 class="govuk-heading-l">{{ previousHearings }}</h2> #}
  {% for item in completedHearings %}
    <h3 class="govuk-heading-l">{{ previousHearings }}</h2>
    <dl class="govuk-summary-list">
      <div class="govuk-summary-list__row">
            <dt class="govuk-summary-list__key">
              {{ dates }}
            </dt>
            <dd class="govuk-summary-list__value">
              {{item.dates}}
            </dd>
      </div>
      <div class="govuk-summary-list__row">
            <dt class="govuk-summary-list__key">
              {{ hearingLength }}
            </dt>
            <dd class="govuk-summary-list__value">
              {{ item.lengthOfHearingText }}
            </dd>
      </div>
      <div class="govuk-summary-list__row">
            <dt class="govuk-summary-list__key">
              {{ hearingMethod }}
            </dt>
             <dd class="govuk-summary-list__value">
              {{ item.hearingMethod }}
            </dd>
      </div>
      <div class="govuk-summary-list__row">
            <dt class="govuk-summary-list__key">
              {{ hearingOutcome }}
            </dt>
            <dd class="govuk-summary-list__value">
                {% for doc in hearingOrders %} 
                  {% if doc.id === item.hearingId %}
                    <a href={{doc.href}} target="_blank">{{ doc.fileName }}</a><br>
                  {% endif %}
                {% endfor %}
            </dd>
      </div>
    </dl>
  {% endfor %}
  {% endif %}
{% endblock %}