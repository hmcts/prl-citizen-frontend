{% extends "common/template.njk" %}
{% extends "common/breadcrumb/template.njk" %}
{% block page_content %}

  {% if section %}
    <h1 class="govuk-heading-xl govuk-!-margin-top-6">{{ section }}</h1>
  {% endif %}

  <p class="govuk-body">{{ caseNumber }} #{{ userCase.id }}</p>
  <hr class="govuk-section-break govuk-section-break--m govuk-section-break--visible">
  {# <h3 class="govuk-heading-l">{{ yourPreviousHearings }}</h3> #}
  {% if userCase.nextHearing.length>=1 %}
   <h3 class="govuk-heading-l">{{ yourFutureHearings }}</h3>
   <p class="govuk-body"><a href={{linkforsupport}}>{{supportDuringCaselinktext}} </a></p>
   <p class="govuk-body"><a href={{linkfordelayorcancel}}>{{delayorcancellinktext}} </a></p>
   {% for item in userCase.nextHearing %}
    <h1 class="govuk-heading-m">{{ nextHearing }}</h1>
    <dl class="govuk-summary-list govuk-summary-list--no-border">
      <div class="govuk-summary-list__row">
            <dt class="govuk-summary-list__key">
              {{ dates }}
            </dt>
            <dd class="govuk-summary-list__value">
              {{item.hearingRequestDateTime}}
            </dd>
      </div>
      <hr class="govuk-section-break govuk-section-break--sm govuk-section-break--visible">
      <div class="govuk-summary-list__row">
            <dt class="govuk-summary-list__key">
              {{ hearingLength }}
            </dt>
            <dd class="govuk-summary-list__value">
              {{item.lastResponseReceivedDateTime}}
            </dd>
      </div>
      <hr class="govuk-section-break govuk-section-break--sm govuk-section-break--visible">
      <div class="govuk-summary-list__row">
            <dt class="govuk-summary-list__key">
              {{ hearingMethod }}
            </dt>
            {% if item.hearingType === 'INTER' %}
             <dd class="govuk-summary-list__value">
              {{inter}}<br>{{inPersonTime}}
            </dd>
            {% endif %}
            {% if item.hearingType === 'TEL' %}
             <dd class="govuk-summary-list__value">
              {{tel}}
            </dd>
            {% endif %}
            {% if item.hearingType === 'VID' %}
             <dd class="govuk-summary-list__value">
              {{vid}}
            </dd>
            {% endif %}
            {% if item.hearingType === 'NA' %}
             <dd class="govuk-summary-list__value">
              {{na}}
            </dd>
            {% endif %}
            {% if item.hearingType === 'ONPPRS' %}
             <dd class="govuk-summary-list__value">
              {{onpprs}}
            </dd>
            {% endif %}
      </div>
    </dl>
    {% set count = 0%}
    {% for schedule in item.hearingDaySchedule %}
    {% set count = count+1 %}
    <hr class="govuk-section-break govuk-section-break--sm govuk-section-break--visible">
    <dl class="govuk-summary-list govuk-summary-list--no-border govuk-!-margin-left-9">
      <div class="govuk-summary-list__row">
            <dt class="govuk-summary-list__key">
              {{ day }}{{ count}}
            </dt>
      </div>
      <hr class="govuk-section-break govuk-section-break--sm govuk-section-break--visible">
      <div class="govuk-summary-list__row">
            <dt class="govuk-summary-list__key">
              {{ hearingDate }}
            </dt>
            <dd class="govuk-summary-list__value">
              {{schedule.hearingStartDateTime}}
            </dd>
      </div>
      <hr class="govuk-section-break govuk-section-break--sm govuk-section-break--visible">
      <div class="govuk-summary-list__row">
            <dt class="govuk-summary-list__key">
              {{ startTime }}
            </dt>
            <dd class="govuk-summary-list__value">
              {{schedule.hearingEndDateTime}}
            </dd>
      </div>
      <hr class="govuk-section-break govuk-section-break--sm govuk-section-break--visible">
      <div class="govuk-summary-list__row">
            <dt class="govuk-summary-list__key">
              {{ hearingDuration }}
            </dt>
            {% if schedule.listAssistSessionId === '1day' %}
              <dd class="govuk-summary-list__value">
                {{1}}{{smallDay}}
              </dd>
            {% else %}
              <dd class="govuk-summary-list__value">
                {{schedule.listAssistSessionId}}{{hours}}
              </dd>
            {% endif %}
      </div>
      <hr class="govuk-section-break govuk-section-break--sm govuk-section-break--visible">
      <div class="govuk-summary-list__row">
            <dt class="govuk-summary-list__key">
              {{ judgeName }}
            </dt>
            <dd class="govuk-summary-list__value">
              {{schedule.hearingJudgeName}}
            </dd>
      </div>
      <hr class="govuk-section-break govuk-section-break--sm govuk-section-break--visible">
      {% if item.hearingType === 'INTER' %}
        <div class="govuk-summary-list__row">
            <dt class="govuk-summary-list__key">
              {{ venue }}
            </dt>
            <dd class="govuk-summary-list__value">
              {{schedule.hearingVenueName}}
            </dd>
        </div>
        <hr class="govuk-section-break govuk-section-break--sm govuk-section-break--visible">
        <div class="govuk-summary-list__row">
            <dt class="govuk-summary-list__key">
              {{ address }}
            </dt>
            <dd class="govuk-summary-list__value">
              {{schedule.hearingVenueAddress}}
            </dd>
        </div>
        <hr class="govuk-section-break govuk-section-break--sm govuk-section-break--visible">
        <div class="govuk-summary-list__row">
            <dt class="govuk-summary-list__key">
              {{ roomId }}
            </dt>
            <dd class="govuk-summary-list__value">
              {{schedule.hearingRoomId}}
            </dd>
        </div>
      {% endif %}
      {% if item.hearingType === 'TEL' %}
        <div class="govuk-summary-list__row">
            <dt class="govuk-summary-list__key">
              {{ hearingLinkHeading }}
            </dt>
            <dd class="govuk-summary-list__value">
              {{hearingLink}}
            </dd>
        </div>
      {% endif %}
      {% if item.hearingType === 'VID' %}
        <div class="govuk-summary-list__row">
            <dt class="govuk-summary-list__key">
              {{ hearingLinkHeading }}
            </dt>
            <dd class="govuk-summary-list__value">
              {{hearingLink}}
            </dd>
        </div>
      {% endif %}
    </dl>
    {% endfor %} 
    {% set count = 0%}
   {% endfor %}
   <hr class="govuk-section-break govuk-section-break--m govuk-section-break--visible">
  {% endif %}
  {% if userCase.futureHearings.length>=1 %}
   {% for item in userCase.futureHearings %}
    <h2 class="govuk-heading-m">{{ upcomingHearing }}</h2>
    <dl class="govuk-summary-list govuk-summary-list--no-border">
      <div class="govuk-summary-list__row">
            <dt class="govuk-summary-list__key">
              {{ dates }}
            </dt>
            <dd class="govuk-summary-list__value">
              {{item.hearingRequestDateTime}}
            </dd>
      </div>
      <hr class="govuk-section-break govuk-section-break--sm govuk-section-break--visible">
      <div class="govuk-summary-list__row">
            <dt class="govuk-summary-list__key">
              {{ hearingLength }}
            </dt>
            <dd class="govuk-summary-list__value">
              {{item.lastResponseReceivedDateTime}}
            </dd>
      </div>
      <hr class="govuk-section-break govuk-section-break--sm govuk-section-break--visible">
      <div class="govuk-summary-list__row">
            <dt class="govuk-summary-list__key">
              {{ hearingMethod }}
            </dt>
            {% if item.hearingType === 'INTER' %}
             <dd class="govuk-summary-list__value">
              {{inter}}<br>{{inPersonTime}}
            </dd>
            {% endif %}
            {% if item.hearingType === 'TEL' %}
             <dd class="govuk-summary-list__value">
              {{tel}}
            </dd>
            {% endif %}
            {% if item.hearingType === 'VID' %}
             <dd class="govuk-summary-list__value">
              {{vid}}
            </dd>
            {% endif %}
            {% if item.hearingType === 'NA' %}
             <dd class="govuk-summary-list__value">
              {{na}}
            </dd>
            {% endif %}
            {% if item.hearingType === 'ONPPRS' %}
             <dd class="govuk-summary-list__value">
              {{onpprs}}
            </dd>
            {% endif %}
      </div>
    </dl>
    {% set count = 0%}
    {% for schedule in item.hearingDaySchedule %}
    {% set count = count+1 %}
    <hr class="govuk-section-break govuk-section-break--sm govuk-section-break--visible">
    <dl class="govuk-summary-list govuk-summary-list--no-border govuk-!-margin-left-9">
      <div class="govuk-summary-list__row">
            <dt class="govuk-summary-list__key">
              {{ day }}{{count}}
            </dt>
      </div>
      <hr class="govuk-section-break govuk-section-break--sm govuk-section-break--visible">
      <div class="govuk-summary-list__row">
            <dt class="govuk-summary-list__key">
              {{ hearingDate }}
            </dt>
            <dd class="govuk-summary-list__value">
              {{schedule.hearingStartDateTime}}
            </dd>
      </div>
      <hr class="govuk-section-break govuk-section-break--sm govuk-section-break--visible">
      <div class="govuk-summary-list__row">
            <dt class="govuk-summary-list__key">
              {{ startTime }}
            </dt>
            <dd class="govuk-summary-list__value">
              {{schedule.hearingEndDateTime}}
            </dd>
      </div>
      <hr class="govuk-section-break govuk-section-break--sm govuk-section-break--visible">
      <div class="govuk-summary-list__row">
            <dt class="govuk-summary-list__key">
              {{ hearingDuration }}
            </dt>
            {% if schedule.listAssistSessionId === '1day' %}
              <dd class="govuk-summary-list__value">
                {{1}}{{smallDay}}
              </dd>
            {% else %}
              <dd class="govuk-summary-list__value">
                {{schedule.listAssistSessionId}}{{hours}}
              </dd>
            {% endif %}
      </div>
      <hr class="govuk-section-break govuk-section-break--sm govuk-section-break--visible">
      <div class="govuk-summary-list__row">
            <dt class="govuk-summary-list__key">
              {{ judgeName }}
            </dt>
            <dd class="govuk-summary-list__value">
              {{schedule.hearingJudgeName}}
            </dd>
      </div>
      <hr class="govuk-section-break govuk-section-break--sm govuk-section-break--visible">
      {% if item.hearingType === 'INTER' %}
        <div class="govuk-summary-list__row">
            <dt class="govuk-summary-list__key">
              {{ venue }}
            </dt>
            <dd class="govuk-summary-list__value">
              {{schedule.hearingVenueName}}
            </dd>
        </div>
        <hr class="govuk-section-break govuk-section-break--sm govuk-section-break--visible">
        <div class="govuk-summary-list__row">
            <dt class="govuk-summary-list__key">
              {{ address }}
            </dt>
            <dd class="govuk-summary-list__value">
              {{schedule.hearingVenueAddress}}
            </dd>
        </div>
        <hr class="govuk-section-break govuk-section-break--sm govuk-section-break--visible">
        <div class="govuk-summary-list__row">
            <dt class="govuk-summary-list__key">
              {{ roomId }}
            </dt>
            <dd class="govuk-summary-list__value">
              {{schedule.hearingRoomId}}
            </dd>
        </div>
      {% endif %}
      {% if item.hearingType === 'TEL' %}
        <div class="govuk-summary-list__row">
            <dt class="govuk-summary-list__key">
              {{ hearingLinkHeading }}
            </dt>
            <dd class="govuk-summary-list__value">
              {{hearingLink}}
            </dd>
        </div>
      {% endif %}
      {% if item.hearingType === 'VID' %}
        <div class="govuk-summary-list__row">
            <dt class="govuk-summary-list__key">
              {{ hearingLinkHeading }}
            </dt>
            <dd class="govuk-summary-list__value">
              {{hearingLink}}
            </dd>
        </div>
      {% endif %}
    </dl>
    {% endfor %}
    {% set count = 0%}
   {% endfor %}
   <hr class="govuk-section-break govuk-section-break--sm govuk-section-break--visible">
  {% endif %}
  {% if userCase.completedHearings.length>=1 %}
   {% for item in userCase.completedHearings %}
    <h3 class="govuk-heading-l">{{ previousHearings }}</h2>
    <dl class="govuk-summary-list govuk-summary-list--no-border">
      <div class="govuk-summary-list__row">
            <dt class="govuk-summary-list__key">
              {{ dates }}
            </dt>
            <dd class="govuk-summary-list__value">
              {{item.hearingRequestDateTime}}
            </dd>
      </div>
      <hr class="govuk-section-break govuk-section-break--sm govuk-section-break--visible">
      <div class="govuk-summary-list__row">
            <dt class="govuk-summary-list__key">
              {{ hearingLength }}
            </dt>
            <dd class="govuk-summary-list__value">
              {{item.lastResponseReceivedDateTime}}
            </dd>
      </div>
      <hr class="govuk-section-break govuk-section-break--sm govuk-section-break--visible">
      <div class="govuk-summary-list__row">
            <dt class="govuk-summary-list__key">
              {{ hearingMethod }}
            </dt>
            {% if item.hearingType === 'INTER' %}
             <dd class="govuk-summary-list__value">
              {{inter}}
            </dd>
            {% endif %}
            {% if item.hearingType === 'TEL' %}
             <dd class="govuk-summary-list__value">
              {{tel}}
            </dd>
            {% endif %}
            {% if item.hearingType === 'VID' %}
             <dd class="govuk-summary-list__value">
              {{vid}}
            </dd>
            {% endif %}
            {% if item.hearingType === 'NA' %}
             <dd class="govuk-summary-list__value">
              {{na}}
            </dd>
            {% endif %}
            {% if item.hearingType === 'ONPPRS' %}
             <dd class="govuk-summary-list__value">
              {{onpprs}}
            </dd>
            {% endif %}
      </div>
      <hr class="govuk-section-break govuk-section-break--sm govuk-section-break--visible">
      <div class="govuk-summary-list__row">
            <dt class="govuk-summary-list__key">
              {{ hearingOutcome }}
            </dt>
            <dd class="govuk-summary-list__value">
                {% for doc in userCase.hearingOrders %} 
                  {% if doc.id === item.hearingID %}
                    <a href={{doc.href}} target="_blank">{{ doc.fileName }}</a><br>
                  {% endif %}
                {% endfor %}
            </dd>
      </div>
        {# {% for doc in userCase.hearingOrders %}
          <div class="govuk-summary-list__row">
            <dt class="govuk-summary-list__key">
              {{doc.createdDate}}
            </dt>
            <dd class="govuk-summary-list__value">
              <a href={{doc.href}} target="_blank">{{ doc.fileName }}</a>
            </dd>
          </div>
        {% endfor %} #}
      <hr class="govuk-section-break govuk-section-break--sm govuk-section-break--visible">
    </dl>
    
   {% endfor %}
  {% endif %}
{% endblock %}